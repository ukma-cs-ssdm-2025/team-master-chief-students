name: Check Commit Message

on: [push]

jobs:
    check-commit-message:
        name: Check Commit Message Format
        runs-on: ubuntu-latest
        steps:
            - name: Checkout code
              uses: actions/checkout@v4
              with:
                  fetch-depth: 0

            - name: Validate Commit Message
              run: |
                  COMMIT_MSG=$(git log -1 --pretty=%B)
                  REGEX="^(feat|fix|docs|chore)\(#([0-9]+)\): .+ \((closes|fixes|resolves) #\2\)$"
                  echo "Checking commit message: $COMMIT_MSG"
                  if [[ ! "$COMMIT_MSG" =~ $REGEX ]]; then
                    echo "ðŸš« Error: The commit message does not match the required format."
                    echo "   Expected format: type(#issue): message (closes|fixes|resolves #issue)"
                    echo "   Example: feat(#123): add new login button (closes #123)"
                    exit 1
                  else
                    echo "âœ… Commit message format is correct."
                  fi
